#!/bin/bash

echo "ğŸš€ CONFIGURANDO GITHUB SECRETS PASO A PASO"
echo "=========================================="
echo ""

# Colores para output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

echo -e "${BLUE}ğŸ“‹ INSTRUCCIONES PARA CONFIGURAR GITHUB SECRETS${NC}"
echo ""
echo -e "${YELLOW}1. ğŸ”‘ OBTENER TOKEN DE FLY.IO:${NC}"
echo "   - Ve a https://fly.io/dashboard"
echo "   - Account â†’ Access Tokens"
echo "   - Create Token â†’ Personal Access Token"
echo "   - Copia el token (fly_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx)"
echo ""
echo -e "${YELLOW}2. ğŸ—„ï¸ OBTENER DATABASE_URL:${NC}"
echo "   - Ve a tu proyecto Supabase"
echo "   - Settings â†’ Database"
echo "   - Connection string â†’ URI"
echo "   - Copia la URL (postgresql://...)"
echo ""
echo -e "${YELLOW}3. ğŸ’³ OBTENER STRIPE_SECRET_KEY:${NC}"
echo "   - Ve a https://dashboard.stripe.com"
echo "   - Developers â†’ API keys"
echo "   - Copia Secret key (sk_test_***HIDDEN***... o sk_live_...)"
echo ""
echo -e "${YELLOW}4. ğŸ”— OBTENER STRIPE_WEBHOOK_SECRET:${NC}"
echo "   - Ve a https://dashboard.stripe.com"
echo "   - Developers â†’ Webhooks"
echo "   - Selecciona tu webhook"
echo "   - Copia Signing secret (whsec_...)"
echo ""
echo -e "${YELLOW}5. ğŸ”§ CONFIGURAR EN GITHUB:${NC}"
echo "   - Ve a tu repositorio en GitHub"
echo "   - Settings â†’ Secrets and variables â†’ Actions"
echo "   - New repository secret"
echo "   - Configura estos 5 secrets:"
echo ""
echo -e "${BLUE}   SECRETS A CONFIGURAR:${NC}"
echo "   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
echo "   â”‚ Nombre del Secret               â”‚ Valor                           â”‚"
echo "   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤"
echo "   â”‚ FLY_API_TOKEN_STAGING          â”‚ [tu token de Fly.io]            â”‚"
echo "   â”‚ FLY_API_TOKEN_PRODUCTION       â”‚ [tu token de Fly.io]            â”‚"
echo "   â”‚ DATABASE_URL                   â”‚ [tu DATABASE_URL de Supabase]   â”‚"
echo "   â”‚ STRIPE_SECRET_KEY              â”‚ [tu STRIPE_SECRET_KEY]          â”‚"
echo "   â”‚ STRIPE_WEBHOOK_SECRET          â”‚ [tu STRIPE_WEBHOOK_SECRET]      â”‚"
echo "   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
echo ""
echo -e "${GREEN}âœ… DESPUÃ‰S DE CONFIGURAR:${NC}"
echo "1. Haz push a tu repositorio"
echo "2. Los workflows se ejecutarÃ¡n automÃ¡ticamente"
echo "3. Verifica en Actions tab que todo funcione"
echo ""
echo -e "${YELLOW}ğŸ’¡ TIP:${NC}"
echo "Puedes usar el mismo token de Fly.io para staging y producciÃ³n"
echo ""
echo -e "${GREEN}ğŸš€ Â¡CONFIGURA ESTOS SECRETS Y TU CI/CD ESTARÃ LISTO!${NC}"
